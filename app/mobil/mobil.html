<link rel="import" href="bower_components/unity-web-player/unity-web-player.html" />
<script src="bower_components/threesixty-slider/src/threesixty.js"></script>
<div ng-controller='mobil as m'>

  <div class="ui grid">
    <div class="row">
      <h1>{{ m.mobilData[m.mobilID - 1].nama_mobil }}</h1>
    </div>
    <div class="row">
      <div class="twelve wide column konten">
        <div>
          <!-- <unity-web-player source="assets/3d/mobil.unity3d" autoplay="true" width="820" height="300"></unity-web-player> -->
          <i class="ui huge caret left icon" ng-if="m.previous == 0"></i>
          <i class="ui huge caret left icon" ng-if="m.previous > 0" ui-sref="mobil({mobil_id: m.previous})"></i>
          <button class="ui primary button" ng-click="mobil.show3d = false;">Show 2D</button>
          <button class="ui primary button" ng-click="mobil.show3d = true;">Show 3D</button>
          <i class="ui huge caret right icon" ng-if="m.next < 4" ui-sref="mobil({mobil_id: m.next})"></i>
          <i class="ui huge caret right icon" ng-if="m.next == 4"></i>
          <div ng-hide="mobil.show3d == true" class="threesixty mobilmuter">
            <div class="spinner">
                <span>0%</span>
            </div>
            <ol class="threesixty_images"></ol>
          </div>
          <div ng-hide="mobil.show3d == false">
            <script>
          			var container, stats;
          			var camera, scene, renderer;
          			var mouseX = 0, mouseY = 0;
          			var windowHalfX = window.innerWidth / 2;
          			var windowHalfY = window.innerHeight / 2;
          			init();
          			animate();
          			function init() {
          				container = document.createElement( 'div' );
          				document.body.appendChild( container );
          				camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
          				camera.position.z = 4;
          				// scene
          				scene = new THREE.Scene();
          				var ambient = new THREE.AmbientLight( 0x444444 );
          				scene.add( ambient );
          				var directionalLight = new THREE.DirectionalLight( 0xffeedd );
          				directionalLight.position.set( 0, 0, 1 ).normalize();
          				scene.add( directionalLight );
          				// BEGIN Clara.io JSON loader code
          				var objectLoader = new THREE.ObjectLoader();
          				objectLoader.load("assets/3d/car_/data.json", function ( obj ) {
          				 	scene.add( obj );
          				} );
          				// END Clara.io JSON loader code
          				renderer = new THREE.WebGLRenderer();
          				renderer.setPixelRatio( window.devicePixelRatio );
          				renderer.setSize( window.innerWidth, window.innerHeight );
          				container.appendChild( renderer.domElement );
          				document.addEventListener( 'mousemove', onDocumentMouseMove, false );
          				//
          				window.addEventListener( 'resize', onWindowResize, false );
          			}
          			function onWindowResize() {
          				windowHalfX = window.innerWidth / 2;
          				windowHalfY = window.innerHeight / 2;
          				camera.aspect = window.innerWidth / window.innerHeight;
          				camera.updateProjectionMatrix();
          				renderer.setSize( window.innerWidth, window.innerHeight );
          			}
          			function onDocumentMouseMove( event ) {
          				mouseX = ( event.clientX - windowHalfX ) / 2;
          				mouseY = ( event.clientY - windowHalfY ) / 2;
          			}
          			//
          			function animate() {
          				requestAnimationFrame( animate );
          				render();
          			}
          			function render() {
          				camera.position.x += ( mouseX - camera.position.x ) * .05;
          				camera.position.y += ( - mouseY - camera.position.y ) * .05;
          				camera.lookAt( scene.position );
          				renderer.render( scene, camera );
          			}
          		</script>
          </div>
        </div>
      </div>
      <div class="four wide column spesifikasi">
        <h1>Spesifikasi</h1>
        <div class="ui animated list">
          <div class="item" ng-repeat="sp in m.sparepartsData | filter: { mobil_id: m.mobilID }">
            <i class="caret right icon"></i>
            <div class="content" ui-sref="spareparts({spareparts_id: sp.sparepart_id})">{{ sp.nama_sparepart }}</div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="sixteen wide column deskripsi">
        <h1>Deskripsi</h1>
        <p ng-bind-html="m.mobilData[m.mobilID - 1].deskripsi"></p>
      </div>
    </div>

  </div>

</div>
